@using StockTrackerConfigurator.DTOs;
@using System.Globalization;
@using static StockTrackerConfigurator.Models.CreationCardModel;

@model CreationCardModel;

@{
  var triggerPrice = Model.CardInfo?.Price * (1 + (Model.CardInfo?.TriggerPercentage / 100));
}

<div class="col-2 stock-card">

  <div 
    class="stock-card-border border rounded">

    <form class="needs-validation p-3"
          novalidate>

      <div class="form-group">
        <select class="form-control" 
          required>
          <option>@Model.CardInfo?.StockName</option>
        </select>
      </div>

      <hr />

      <div class="form-group mb-3">
        <label for="price">Price</label>
        <input value="@Model.CardInfo?.Price.ToString(CultureInfo.InvariantCulture)"
          type="number" 
          class="form-control" 
          step="0.01"
          required>
      </div>

      <div class="input-group mb-3">

        <label class="col-12" for="percentage">Triggers in (%)</label>

        <div class="input-group-prepend w-50">
          <input value="@Model.CardInfo?.TriggerPercentage.ToString(CultureInfo.InvariantCulture)"
            type="number" 
            class="form-control"
            step="0.01"
            required>
        </div>

        <input value="@triggerPrice?.ToString("N2")"
          type="text" 
          class="form-control" 
          disabled>

      </div>

      <div class="input-group">

        @if(Model.CardInfo != null)
        {
          <button type="button"
                  class="btn @CreationCardModel.CARD_REMOVE_BTN btn-@(Model.CardInfo.Buying ? "danger" : "success")"
                  data-buying="true">
            @(Model.CardInfo.Buying ? "Bougth" : "Sold")
          </button>
        }
      </div>

    </form>

	</div>

</div>